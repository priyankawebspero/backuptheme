<div class="teaser-spotlight-block" id="teaser-spotlight-33-{{section.id}}">
  <div class="{% if section.settings.layout == 'default' %}container-padd60{% else %}container-fluid{% endif %}">

    <div class="row">
      <div class="col-12 col-md-12 col-lg-12 text-center">      
        <div class="counter_text"><p id="demo"></p></div>        
      </div>
      <div class="col-12 col-md-12 col-lg-12 text-center"> 
         {% if section.settings.title_count != blank %} <h3> {{section.settings.title_count}}</h3> {% endif %}
        <div class="signup-mail-outer">		
          <div class="outter">			
            <div class="desktop_view">
              <div class="desktop-form right">
                <input type="text" oninput="validatePhone(); yourFunction()" id="desktop-name" name="name" placeholder="name" required="">
                <input type="email" oninput="validateEmail();yourFunction()" id="desktop-email" name="email" placeholder="email id" required="">
                <input type="text" oninput="validatePhone2();yourFunction()" name="number" id="desktop-phone" placeholder="phone number" required=""><br>
                <button id="signup_button_desktop" style="" onclick="submit()" value="Sign me up" disabled="">submit</button>
              </div>
              <div class="confirm" style="display:none;height:auto">Yayyy!! You've successfully reserved a spot :)</div>
            </div>
          </div>
        </div>
        {% if section.settings.title_count_text != blank %} <p> {{section.settings.title_count_text}}</p> {% endif %}
      </div>
    </div>
  </div>
</div>
<!-- <a href="https://plumgoodness.com/pages/candy-crush" style="float:left;"><img src="https://cdn.shopify.com/s/files/1/0390/2985/files/Game-zone_LP_Desktop.jpg?v=1656231181" alt"sale"></a> -->
<style>
  div#shopify-section-counter-bottom{
  background-image:url({{ section.settings.bg-image | img_url: 'master'}}); background-size:cover;
  }.counter_text{
  background-image:url({{section.settings.gif_image | img_url: 'master'}}); background-size:cover;
  }
  
  @media (max-width:767px){
    div#shopify-section-counter-bottom{
      background-image:url({{ section.settings.bg-image-mob | img_url: 'master'}}); background-size:cover;
    }.counter_text{
      background-image:url({{section.settings.gif_image_mob | img_url: 'master'}}); background-size:cover;
    }  
  }
  
</style>


<script>
// Set the date we're counting down to
var countDownDate = new Date("{{section.settings.text_date}}").getTime();
// Update the count down every 1 second
var x = setInterval(function() {
  // Get today's date and time
  var now = new Date().getTime(); 
  // Find the distance between now and the count down date
  var distance = countDownDate - now;    
  // Time calculations for days, hours, minutes and seconds
  var days = Math.floor(distance / (1000 * 60 * 60 * 24));
  var hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
  var minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
  var seconds = Math.floor((distance % (1000 * 60)) / 1000);
  if (hours < 10){ var zero1 = Math.floor(0)} else {zero1 = ''};
  if (days < 10){ var zero2 = Math.floor(0)} else {zero2 = ''};
  if (minutes < 10){ var zero3 = Math.floor(0)} else {zero3 = ''};
  if (seconds < 10){ var zero4 = Math.floor(0)} else {zero4 = ''};
  // Output the result in an element with id="demo"
  document.getElementById("demo").innerHTML =  "<span class='days countdown'><span class='ocount'>" + zero2 + "" + days + "<br><span class='text_cunt'>days</span></span><span class='inner'> </span> : </span><hr/>" + "<span class='hours countdown'><span class='ocount'>" + zero1 + "" + hours + "<br><span class='text_cunt'>hours</span></span><span class='inner'> </span> : </span><hr/> <span class='minutes countdown'><span class='ocount'>"
 + zero3 + "" + minutes + "<br><span class='text_cunt'>min</span></span><span class='inner'> </span> : </span><hr><span class='seconds countdown'><span class='ocount'>"  + zero4 + "" + seconds + "<br><span class='text_cunt'>sec</span></span><span class='inner'>  </span></span><hr> ";
  
  // If the count down is over, write some text 
  if (distance < 0) {
    clearInterval(x);
    document.getElementById("demo").innerHTML = "Happy Bithday Plum";
  }
}, 1000); 
  
</script>


<script type="text/javascript">

			function validateEmail() {
				var x, text;
				x = document.getElementById("desktop-name").value;
				y = document.getElementById("desktop-email").value;
				x = x.replace(/\D/g, '');
				if (/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(y)) {
					//alert(x)
					document.getElementById("desktop-email").style.borderColor = "green";
					return true
				}
				else {
					//alert(x)
					document.getElementById("desktop-email").style.borderColor = "red";
					return false
				}


			}
  	        function validatePhone() {
				var x, text;

				var phoneno = /^[a-zA-Z\s]*$/;

				x = document.getElementById("desktop-name").value;
				y = document.getElementById("desktop-email").value;

				if (/^[a-zA-Z\s]*$/.test(x)) {
					document.getElementById("desktop-name").style.borderColor = "green";
					return true
				}
				else {
					document.getElementById("desktop-name").style.borderColor = "red";
					return false
				}
			}
         	function validatePhone2() {
				var x, text;

				var phoneno = /^\(?([0-9]{3})\)?[-. ]?([0-9]{3})[-. ]?([0-9]{4})$/;

				x = document.getElementById("desktop-phone").value;
				y = document.getElementById("desktop-email").value;

				if (/^\(?([0-9]{3})\)?[-. ]?([0-9]{3})[-. ]?([0-9]{4})$/.test(x)) {
					document.getElementById("desktop-phone").style.borderColor = "green";
					return true
				}
				else {
					document.getElementById("desktop-phone").style.borderColor = "red";
					return false
				}
			}

			function yourFunction() {
				//alert("Yes")
				if (validatePhone() && validateEmail() && validatePhone2()) {
					//alert("here")
					document.getElementById("signup_button_desktop").disabled = false
					document.getElementById("signup_button_desktop").style.background = "#5b128a";
				}
				else{
					document.getElementById("signup_button_desktop").disabled = true
					document.getElementById("signup_button_desktop").style.background = "grey";
				}
			}

			function submit(){
             var phone = document.getElementById("desktop-name").value;
			 var email = document.getElementById("desktop-email").value;
             var mob = document.getElementById("desktop-phone").value;
              
                        var tpid = '{{__template_id}}'
                        var cp_id = '{{__campaign_id}}'
                        var data = {tpid,cp_id}
							//javascript:parent.signup_leads(data);
				            //iframe_size();
				          //  javascript:parent.notif_frame([['height',160],['width',220],['margin-left',-108],['margin-top',-76]])

							//document.getElementsByClassName("desktop").style.display = "none";
                             $('.desktop_view input').hide();
                             $('#signup_button_desktop').hide();
                             $('.confirm').show();
              clevertap.event.push("8th Birthday Customers", {
                "Name" : phone,
                "Email" : email,
                "Phone" : mob
              });
              clevertap.onUserLogin.push({
                "Site": {          
                  "Identity": email
                }
              });

							
							
			}

		</script>
{% schema %}
{
    "name": "Teaser Count Section",
	"class": "teaser-custom-block",
    "settings": [      
        {
            "type": "select",
            "id": "layout",
            "label": "Teaser 3 Layout:",
            "options": [
                {
                    "value": "default",
                    "label": "Default"
                },
                {
                    "value": "full",
                    "label": "Full Width"
                }
            ],
            "default": "default"
        },
         {
            "type": "text",
            "id": "title",
            "label": "heading"
          },
        {
            "type": "checkbox",
            "id": "display_padding",
            "label": "Display Padding?",
            "default": false
        },{
            "type": "image_picker",
            "id": "bg-image",
            "label": "Background Image Desktop"
          },{
            "type": "image_picker",
            "id": "bg-image-mob",
            "label": "Background Image Mobile"
          }
           ,{
            "type": "image_picker",
            "id": "gif_image",
            "label": "Timer Image Desktop"
          }
           ,{
            "type": "image_picker",
            "id": "gif_image_mob",
            "label": "Timer Image Mobile"
          },
         {
            "type": "text",
            "id": "text_date",
            "label": "Enter Date",
            "default": "Jul 5, 2023 15:37:25"
          },
         {
            "type": "text",
            "id": "title_count",
            "label": "Before Form Text"
          },
         {
            "type": "text",
            "id": "title_count_text",
            "label": "After Form Text"
          },        
        {
            "type": "select",
            "id": "title_style",
            "label": "Title Style:",

            "options": [
                {
                    "value": "style_1",
                    "label": "Style 1" 
                },
                { 
                    "value": "style_2",
                    "label": "Style 2" 
                }          
            ],
            "default": "style_1"
        },
        {
            "type": "range",
            "id": "margin_bottom",
            "label": "Margin Bottom",
            "min": 0,
            "max": 100,
            "step": 1,
            "default": 0
        }	
    ]
  }
{% endschema %}

{% stylesheet %}
{% endstylesheet %}

{% javascript %}
{% endjavascript %}
