<script>  
$('.tag__wrapper').on('click', function(ev){
 setTimeout(function () { 
window.location.href = '/checkout';
     }, 3000);
});
// Add free product by discount Code
  {% if settings.enable_free_product %}
	  {% assign couponCode = settings.discount_coupon | downcase %}
	  {% assign productSku = settings.product_sku_free %}
	  {% assign productIdFree = settings.product_id_free %}
	  {% assign cartTotal = settings.cartTotal | times:100%}
	  {% assign QuantityTotal = settings.quantityTotal | plus: 0%}

	  {% assign couponCode2 = settings.discount_coupon_2 | downcase %}
	  {% assign productSku2 = settings.product_sku_free_2 %}
	  {% assign productIdFree2 = settings.product_id_free_2 %}
	  {% assign cartTotal2 = settings.cartTotal_2 | times:100%}
	  {% assign QuantityTotal2 = settings.quantityTotal_2 | plus: 0%}

	  {% assign couponCode3 = settings.discount_coupon_3  | downcase%}
	  {% assign productSku3 = settings.product_sku_free_3 %}
	  {% assign productIdFree3 = settings.product_id_free_3 %}
	  {% assign cartTotal3 = settings.cartTotal_3 | times:100%}
	  {% assign QuantityTotal3 = settings.quantityTotal_3 | plus: 0%}

	  {% assign couponCode4 = settings.discount_coupon_4  | downcase%}
	  {% assign productSku4 = settings.product_sku_free_4 %}
	  {% assign productIdFree4 = settings.product_id_free_4 %}
	  {% assign cartTotal4 = settings.cartTotal_4 | times:100%}
	  {% assign QuantityTotal4 = settings.quantityTotal_4 | plus: 0%}

	  {% assign couponCode5 = settings.discount_coupon_5  | downcase%}
	  {% assign productSku5 = settings.product_sku_free_5 %}
	  {% assign productIdFree5 = settings.product_id_free_5 %}
	  {% assign cartTotal5 = settings.cartTotal_5 | times:100%}
	  {% assign QuantityTotal5 = settings.quantityTotal_5 | plus: 0%}

    {% assign couponCode6 = settings.discount_coupon_6  | downcase%}
    {% assign productSku6 = settings.product_sku_free_6 %}
    {% assign productIdFree6 = settings.product_id_free_6 %}
    {% assign cartTotal6 = settings.cartTotal_6 | times:100%}
    {% assign QuantityTotal6 = settings.quantityTotal_6 | plus: 0%}

	  {% assign lineItemlength = 0 %}

	  {% for line_items in checkout.line_items %}  
	  {% assign lineItemlength = lineItemlength | plus:1 %}
	  {%endfor%}

	  {% capture free_product %}
	  {% for line_items in checkout.line_items %}  
	  {{line_items.sku}}
	  {%endfor%}
	  {%endcapture%}


	  {% if cartTotal <= checkout.total_price and QuantityTotal <= lineItemlength%}
	  {% if free_product contains productSku %}
	  {% else %}
          $('#checkout_submit').on('click', function(ev){ 
            ev.preventDefault();           
            let discountCode = $('input[name="checkout[reduction_code]"]').val().toLowerCase();;
            if (discountCode == "{{couponCode}}"){
            $(this).addClass('btn--loading'); 
            var params = {
              type: 'POST',
              url: '/cart/add.js',
              data: 'quantity=1&id={{productIdFree}}',
              dataType: 'json', 
              success: function(){
                setTimeout(function () { 
                  window.location.href = '/checkout?discount={{couponCode}}';
                }, 2000);
              }
            };
            jQuery.ajax(params);
          }
          else{
         $("#checkout_submit").unbind('click').click();
         window.location.href = '/checkout?discount='+discountCode;
        }
       });
	  {% endif %}
	  {% endif %}

	  {% if cartTotal2 <= checkout.total_price and QuantityTotal2 <= lineItemlength %}
	  {% if free_product contains productSku2 %}
	  {% else %} 
          $('#checkout_submit').on('click', function(ev){
            ev.preventDefault();  
            let discountCode = $('input[name="checkout[reduction_code]"]').val().toLowerCase();;
            if (discountCode == "{{couponCode2}}"){
            $(this).addClass('btn--loading');
            var params = {
              type: 'POST',
              url: '/cart/add.js',
              data: 'quantity=1&id={{productIdFree2}}',
              dataType: 'json', 
              success: function(){
                setTimeout(function () { 
                  window.location.href = '/checkout?discount={{couponCode2}}';
                }, 2000);
              }
            };
            jQuery.ajax(params);
          }
          else{
         $("#checkout_submit").unbind('click').click();
             window.location.href = '/checkout?discount='+discountCode;
        }
       });
	  {% endif %}
	  {% endif %}

	    {% if cartTotal3 <= checkout.total_price and QuantityTotal3 <= lineItemlength %}
	  {% if free_product contains productSku3 %}
	  {% else %}
          $('#checkout_submit').on('click', function(ev){
                        ev.preventDefault();
            let discountCode = $('input[name="checkout[reduction_code]"]').val().toLowerCase();;
            if (discountCode == "{{couponCode3}}"){
            $(this).addClass('btn--loading'); 
            var params = {
              type: 'POST',
              url: '/cart/add.js',
              data: 'quantity=1&id={{productIdFree3}}',
              dataType: 'json', 
              success: function(){
                setTimeout(function () { 
                  window.location.href = '/checkout?discount={{couponCode3}}';
                }, 2000);
              }
            };
            jQuery.ajax(params);
          }
          else{
        $("#checkout_submit").unbind('click').click();
         window.location.href = '/checkout?discount='+discountCode;
        }
       });
	  {% endif %}
	  {% endif %}

	  {% if cartTotal4 <= checkout.total_price and QuantityTotal4 <= lineItemlength %}
	  {% if free_product contains productSku4 %}
	  {% else %}
          $('#checkout_submit').on('click', function(ev){
            ev.preventDefault();
            let discountCode = $('input[name="checkout[reduction_code]"]').val().toLowerCase();;
            if (discountCode == "{{couponCode4}}"){
            $(this).addClass('btn--loading'); 
            var params = {
              type: 'POST',
              url: '/cart/add.js',
              data: 'quantity=1&id={{productIdFree4}}',
              dataType: 'json', 
              success: function(){
                setTimeout(function () { 
                  window.location.href = '/checkout?discount={{couponCode4}}';
                }, 2000);
              }
            };
            jQuery.ajax(params);
          }
          else{
        $("#checkout_submit").unbind('click').click();
        window.location.href = '/checkout?discount='+discountCode;
        }
       });
	  {% endif %}
	  {% endif %}

	  {% if cartTotal5 <= checkout.total_price and QuantityTotal5 <= lineItemlength %}
	  {% if free_product contains productSku5 %}
	  {% else %}
          $('#checkout_submit').on('click', function(ev){
                        ev.preventDefault();
            let discountCode = $('input[name="checkout[reduction_code]"]').val().toLowerCase();;
            if (discountCode == "{{couponCode5}}"){
            $(this).addClass('btn--loading'); 
            var params = {
              type: 'POST',
              url: '/cart/add.js',
              data: 'quantity=1&id={{productIdFree5}}',
              dataType: 'json', 
              success: function(){
                setTimeout(function () { 
                  window.location.href = '/checkout?discount={{couponCode5}}';
                }, 2000);
              }
            };
            jQuery.ajax(params);
          }
          else{
      $("#checkout_submit").unbind('click').click();
      window.location.href = '/checkout?discount='+discountCode;
        }
       });
	  {% endif %}
	  {% endif %}

    {% if cartTotal6 <= checkout.total_price and QuantityTotal6 <= lineItemlength %}
    {% if free_product contains productSku6 %}
    {% else %}
          $('#checkout_submit').on('click', function(ev){
            ev.preventDefault();
			console.log('sdffffffffffff');
            let discountCode = $('input[name="checkout[reduction_code]"]').val().toLowerCase();
            if (discountCode == "{{couponCode6}}"){
            $(this).addClass('btn--loading'); 
            var params = {
              type: 'POST',
              url: '/cart/add.js',
              data: 'quantity=1&id={{productIdFree6}}',
              dataType: 'json', 
              success: function(){
                setTimeout(function () { 
                  window.location.href = '/checkout?discount={{couponCode6}}';
                }, 2000);
              }
            };
            jQuery.ajax(params);
          }
          else{
      $("#checkout_submit").unbind('click').click();
      window.location.href = '/checkout?discount='+discountCode;
        }
       });
    {% endif %}
    {% endif %}

  {% endif %}
  
</script>