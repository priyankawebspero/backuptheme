<head>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>
<script src='https://kit.fontawesome.com/a076d05399.js'></script>


  
<div id="chat-circle" class="btnbot" onclick="botOpen()">
        <div id="chat-overlay"></div>
            <img src="https://cdn.shopify.com/s/files/1/0390/2985/files/plumlogo.png?v=1597840544">
    </div>
  
  <div class="chat-box">
    <div class="chat-box-header">
      Happy to help!
      <span class="chat-box-toggle"><i class="material-icons">X</i></span>
    </div>
    <div class="chat-box-body">
      <div class="chat-box-overlay">   
      </div>
      <div class="chat-logs">
       
      </div><!--chat-log -->
    </div>
    <div class="chat-input">      
      <form>
        <input type="text" id="chat-input" placeholder="Send a message..."/>
      <button type="submit" class="chat-submit" id="chat-submit" onclick="sendMessage()"><i class="fa fa-send" style="font-size:25px;color:#5b128a"></i></button>
      </form>      
    </div>
  </div>
  
<script>
  function botOpen(){
  	var isMobile = false; //initiate as false
      // device detection
    if(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|ipad|iris|kindle|Android|Silk|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(navigator.userAgent) 
       || /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(navigator.userAgent.substr(0,4))) { 
      isMobile = true;
    }
    var device_type="Mobile"
    if(!isMobile){
      device_type="Desktop"
    }
    window.dataLayer = window.dataLayer || [];
    window.dataLayer.push({
        'event':'bot_open',
      	'device':device_type
      })
  }
  function sendMessage(){
    var inputNumber=$("#chat-input").val();
  	var isMobile = false; //initiate as false
      // device detection
    if(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|ipad|iris|kindle|Android|Silk|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(navigator.userAgent) 
       || /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(navigator.userAgent.substr(0,4))) { 
      isMobile = true;
    }
    var device_type="Mobile"
    if(!isMobile){
      device_type="Desktop"
    }
    window.dataLayer = window.dataLayer || [];
    window.dataLayer.push({
        'event':'bot_send_message',
        'inputNumber':inputNumber,
      	'device':device_type
      })
  }
</script>

<style>
  
  
  


#center-text {          
  display: flex;
  flex: 1;
  flex-direction:column; 
  justify-content: center;
  align-items: center;  
  height:100%;
  
}
#chat-circle {
  position: fixed;
  bottom: 48px;
  right: 10px;
  background: url('https://cdn.shopify.com/s/files/1/0390/2985/files/CHAT_BOX_ICON-05.png?v=1600069100');
  background-size:cover;
  width: 0px;
  height: 50px;  
  border-radius: 50%;
  color: white;
  padding: 28px;
  cursor: pointer;
  box-shadow: 0px 3px 16px 0px rgba(0, 0, 0, 0.6), 0 3px 1px -2px rgba(0, 0, 0, 0.2), 0 1px 5px 0 rgba(0, 0, 0, 0.12);
}

.btnbot#my-btn {
     background: white;
    padding-top: 13px;
    padding-bottom: 12px;
    border-radius: 45px;
    padding-right: 40px;
    padding-left: 40px;
    color: #5865C3;
}
#chat-overlay {
    background: rgba(255,255,255,0.1);
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    display: none;
}


.chat-box {
  display:none;
  z-index:3;
  background: #efefef;
  position:fixed;
  right:30px;
  bottom:45px;  
  width:350px;
  max-width: 85vw;
  max-height:100vh;
  border-radius:5px;  
/*   box-shadow: 0px 5px 35px 9px #464a92; */
  box-shadow: 0px 5px 35px 9px #ccc;
}
.chat-box-toggle {
  float:right;
  margin-right:15px;
  cursor:pointer;
}
.chat-box-header {
  background: #5b128a;
  height:70px;
  border-top-left-radius:5px;
  border-top-right-radius:5px; 
  color:white;
  text-align:center;
  font-size:20px;
  padding-top:17px;
}
.chat-box-body {
  position: relative;  
  height:370px;  
  height:auto;
  border:1px solid #ccc;  
  overflow: hidden;
}
.chat-box-body:after {
  content: "";
  background-image: url('https://cdn.shopify.com/s/files/1/0390/2985/files/backgroundChat.png?v=1597897122');
  opacity: 0.1;
  top: 0;
  left: 0;
  bottom: 0;
  right: 0;
  height:100%;
  position: absolute;
  z-index: -1;   
}
#chat-input {
  background: #f4f7f9;
  width:100%; 
  position:relative;
  height:47px;  
  padding-top:10px;
  padding-right:50px;
  padding-bottom:10px;
  padding-left:15px;
  border:none;
  resize:none;
  outline:none;
  border:1px solid #ccc;
  color:#888;
  border-top:none;
  border-bottom-right-radius:5px;
  border-bottom-left-radius:5px;
  overflow:hidden;  
}
.chat-input > form {
    margin-bottom: 0;
}
#chat-input::-webkit-input-placeholder { /* Chrome/Opera/Safari */
  color: #ccc;
}
#chat-input::-moz-placeholder { /* Firefox 19+ */
  color: #ccc;
}
#chat-input:-ms-input-placeholder { /* IE 10+ */
  color: #ccc;
}
#chat-input:-moz-placeholder { /* Firefox 18- */
  color: #ccc;
}
.chat-submit {  
  position:absolute;
  bottom:3px;
  right:10px;
  background: transparent;
  box-shadow:none;
  border:none;
  border-radius:50%;
  color:#5A5EB9;
  width:35px;
  height:35px;  
}
.chat-logs {
  padding:15px; 
  height:370px;
  overflow-y:scroll;
}

.chat-logs::-webkit-scrollbar-track
{
    -webkit-box-shadow: inset 0 0 6px rgba(0,0,0,0.3);
    background-color: #F5F5F5;
}

.chat-logs::-webkit-scrollbar
{
    width: 5px;  
    background-color: #F5F5F5;
}

.chat-logs::-webkit-scrollbar-thumb
{
    background-color: #5A5EB9;
}



@media only screen and (max-width: 500px) {
   .chat-logs {
        height:40vh;
    }
}

.chat-msg.user > .msg-avatar img {
  width:45px;
  height:45px;
  border-radius:50%;
  float:left;
  width:15%;
  background: url('https://cdn.shopify.com/s/files/1/0390/2985/files/plumlogo.png?v=1597840544');
  background-size:cover;
}
.chat-msg.self > .msg-avatar img {
  width:45px;
  height:45px;
  border-radius:50%;
  float:right;
  width:15%;
  
}
.cm-msg-text {
  background:white;
  padding:10px 15px 10px 15px;  
  color:black;
  max-width:75%;
  float:left;
  margin-left:10px; 
  position:relative;
  margin-bottom:20px;
  border-radius:30px;
  font-size:smaller;
  line-height:normal;
}
.chat-msg {
  clear:both;    
}
.chat-msg.self > .cm-msg-text {  
  float:right;
  margin-right:10px;
  background: #5A5EB9;
  color:white;
}
.cm-msg-button>ul>li {
  list-style:none;
  float:left;
  width:50%;
}
.cm-msg-button {
    clear: both;
    margin-bottom: 70px;
}
  .highlight{
  	font-weight:bold;
    color:black;
  }


</style>
<script>
  

$(function() {
  var INDEX = 0;
  var showOffers;
  if(INDEX==0){
    showOffers=false
  	generate_message("Hey plumster! Welcome to a world of goodness ðŸ’œ<br><\/br>", 'user',true);
  }
  $("#chat-submit").click(function(e) {
    e.preventDefault();
    var msg = $("#chat-input").val(); 
    if(msg.trim() == ''){
      return false;
    }
    generate_message(msg, 'self',false);
    var buttons = [
        {
          name: 'Existing User',
          value: 'existing'
        },
        {
          name: 'New User',
          value: 'new'
        }
      ];
    if(!showOffers){
    if(msg.trim()=='1'){
        showOffers=true
    	setTimeout(function() {     
          generate_message("<a style=\"color:blue\" href=\"https:\/\/plumgoodness.clickpost.in\" target=\"_blank\">Track your order</a> here by entering your order number or shipment tracking number (both of which you should have received via email &amp; SMS).<br><\/br> <u><span style=\"font-weight:bold\">Please note:<\/span><\/u> You can expect a 2-3 day dispatch time from the date of placing your order. Don&#39;t worry - goodness will be on its way to you soon!", 'user',false);  
        }, 1000)
        setTimeout(function() {
          
          generate_message("Type 6 to return to the main menu!", 'user',false);  
        }, 1000)
    }
    else if(msg.trim()=='2'){
      showOffers=true
    	setTimeout(function() {     
          generate_message("â€˜Tis the season to be shopping! Come join us as we celebrate the season of joy with The Plum HoliYAY Sale 2020. We've got a party going for you - get up to 40% OFF sitewide & more! <ul style=\"font-weight:bold;color:black\"><li><i class=\"fa fa-gift\" style=\"font-size:15px;font-weight:bold;color:#5b128a\"></i> Up to 40% OFF on ALL products<\/li><i class=\"fa fa-gift\" style=\"font-size:15px;font-weight:bold;color:#5b128a\"></i> A Hawaiian Rumba bodycare duo FREE on orders above Rs. 899<\/li><li><i class=\"fa fa-gift\" style=\"font-size:15px;font-weight:bold;color:#5b128a\"></i> A gift code worth Rs. 200 (youâ€™ll find it in your inbox ~14 days post the sale)<\/li><li><i class=\"fa fa-gift\" style=\"font-size:15px;font-weight:bold;color:#5b128a\"></i> An additional 5% OFF on all prepaid orders!<\/li><li>Join the party - get started now <!--a style=\"color:blue\" href=\"https:\/\/plumgoodness.com\/pages\/happy-birthday-plum-2\">here!<\/a--> <\/li><\/ul>", 'user',false);  
        }, 1000)
        setTimeout(function() {
          
          generate_message("Type 6 to return to the main menu!", 'user',false);  
        }, 1000)
    }
    else if(msg.trim()=='3'){
      showOffers=true
    	setTimeout(function() {     
          generate_message("Place a prepaid order and get an additional 5% OFF on your order! Here's how:<ol><li><span style=\"font-weight:bold\">1. <\/span>Add your favourite plums to cart & head on to checkout<\/li><li><span style=\"font-weight:bold\">2. <\/span>Enter shipping information & move to payment<\/li><li><span style=\"font-weight:bold\">3. <\/span>On the payment page, choose the online payment option<\/li><li><span style=\"font-weight:bold\">4. <\/span>Wait for the page to refresh & 5% OFF will auto apply to your order<\/li><li><span style=\"font-weight:bold\">5. <\/span>Pay online & wait for us to ship goodness to you!<\/li><\/ol>", 'user',false);  
        }, 1000)
        setTimeout(function() {
          
          generate_message("Type 6 to return to the main menu!", 'user',false);  
        }, 1000)
    }
    else if(msg.trim()=='5'){
      showOffers=true
    	setTimeout(function() {     
          generate_message("You can connect to our lovely customer support people by,<ul><li>1.Calling us on +91-750-649-6604<\/li><li>2.Writing at <u><a style=\"color:blue\" href=\"mailto:hello@plumgoodness.com\">hello@plumgoodness.com<\/a><\/u><\/li><li>Due to heavy traffic loads during the Diwali sale, there may be a slight delay in us getting back to you, but we&#39;ll get back to you ASAP - we promise!<\/li><\/ul>", 'user',false);  
        }, 1000)
        setTimeout(function() {
          
          generate_message("Type 6 to return to the main menu!", 'user',false);  
        }, 1000)
    }
    else if(msg.trim()=='4'){
      showOffers=true
    	setTimeout(function() {     
          generate_message("A beachy Christmas is our gift to you! Get a Hawaiian Rumba Shower Gel (50ml) & Body Mist (30ml) Mini Duo FREE on all orders above Rs. 899<br><br ><span style=\" font-weight:bold\">Here's how you'll get it</span>:<br><br>Add your favourite plums to cart. Once your cart value hits Rs. 899, it'll refresh & your free item will get added. You should be able to see it. If you're still unable to, manually refresh your cart page to make sure the freebie is in!", 'user',false);  
        }, 1000)
        setTimeout(function() {
          
          generate_message("Type 6 to return to the main menu!", 'user',false);  
        }, 1000)
    }
    else{
    	setTimeout(function() {     
          generate_message("Choose the correct response", 'user',false);  
        }, 1000)
        setTimeout(function() {
          
          generate_message("", 'user',true);  
        }, 1000)
    }
    }
    else{
      showOffers=false
    	setTimeout(function() {
          
          generate_message("", 'user',true);  
        }, 1000)
    }
    
    
  })
  
  function generate_message(msg, type,query) {
    INDEX++;
    var str="";
    if(!query){
    
    str += "<div id='cm-msg-"+INDEX+"' class=\"chat-msg "+type+"\">";
    str += "          <span class=\"msg-avatar\">";
    str += "            <img src=\"https:\/\/image.crisp.im\/avatar\/operator\/196af8cc-f6ad-4ef7-afd1-c45d5231387c\/240\/?1483361727745\" onerror=\"this.style.display='none'\">";
    str += "          <\/span>";
    str += "          <div class=\"cm-msg-text\">";
    str += msg;
    str += "          <\/div>";
    str += "        <\/div>";
    }
    else{
      
      str += "<div id='cm-msg-"+INDEX+"' class=\"chat-msg "+type+"\">";
    str += "          <span class=\"msg-avatar\">";
    str += "            <img src=\"https:\/\/image.crisp.im\/avatar\/operator\/196af8cc-f6ad-4ef7-afd1-c45d5231387c\/240\/?1483361727745\" onerror=\"this.style.display='none'\">";
    str += "          <\/span>";
    str += "          <div class=\"cm-msg-text\">";
    str += msg+"Type in one of the following numbers and hit the send button to help us serve you better: <ul><li><span class=\"highlight \"> Type 1<\/span>, to know your order status<\/li><li> <span class=\"highlight \"> Type 2<\/span>, to explore The Plum HoliYAY Sale 2020 offers<\/li><li><span class=\"highlight \"> Type 3<\/span>, for questions on the prepaid discount<\/li><li><span class=\"highlight \"> Type 4<\/span>, for questions on your free gift<\/li><li><span class=\"highlight \"> Type 5<\/span>, to contact plum people!<\/li><\/ul>";
    str += "          <\/div>";
    str += "        <\/div>";
    
    }
    
    $(".chat-logs").append(str);
    $("#cm-msg-"+INDEX).hide().fadeIn(300);
    if(type == 'self'){
     $("#chat-input").val(''); 
    }    
    $(".chat-logs").stop().animate({ scrollTop: $(".chat-logs")[0].scrollHeight}, 1000);    
  }  
  
  function generate_button_message(msg, buttons){    
    /* Buttons should be object array 
      [
        {
          name: 'Existing User',
          value: 'existing'
        },
        {
          name: 'New User',
          value: 'new'
        }
      ]
    */
    INDEX++;
    var btn_obj = buttons.map(function(button) {
       return  "              <li class=\"button\"><a href=\"javascript:;\" class=\"btn btn-primary chat-btn\" chat-value=\""+button.value+"\">"+button.name+"<\/a><\/li>";
    }).join('');
    var str="";
    str += "<div id='cm-msg-"+INDEX+"' class=\"chat-msg user\">";
    str += "          <span class=\"msg-avatar\">"+INDEX;
    str += "            <img src=\"https:\/\/image.crisp.im\/avatar\/operator\/196af8cc-f6ad-4ef7-afd1-c45d5231387c\/240\/?1483361727745\">";
    str += "          <\/span>";
    str += "          <div class=\"cm-msg-text\">";
    str += msg;
    str += "          <\/div>";
    str += "          <div class=\"cm-msg-button\">";
    str += "            <ul>";   
    str += btn_obj;
    str += "            <\/ul>";
    str += "          <\/div>";
    str += "        <\/div>";
    $(".chat-logs").append(str);
    $("#cm-msg-"+INDEX).hide().fadeIn(300);   
    $(".chat-logs").stop().animate({ scrollTop: $(".chat-logs")[0].scrollHeight}, 1000);
    $("#chat-input").attr("disabled", true);
  }
  
  $(document).delegate(".chat-btn", "click", function() {
    var value = $(this).attr("chat-value");
    var name = $(this).html();
    $("#chat-input").attr("disabled", false);
    generate_message(name, 'self');
  })
  
  $("#chat-circle").click(function() {    
    $("#chat-circle").toggle('scale');
    $(".chat-box").toggle('scale');
  })
  
  $(".chat-box-toggle").click(function() {
    $("#chat-circle").toggle('scale');
    $(".chat-box").toggle('scale');
  })
  
})


</script>